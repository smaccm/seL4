#
# Copyright 2014, General Dynamics C4 Systems
#
# This software may be distributed and modified according to the terms of
# the GNU General Public License version 2. Note that NO WARRANTY is provided.
# See "LICENSE_GPLv2.txt" for details.
#
# @TAG(GD_GPL)
#

config PCI
    bool "PCI support"
        depends on PLAT_PC99
        default y
        help
            PCI support, normal should be yes for current
            x86 based PCs

config IOMMU
    bool "IOMMU support"
        depends on PLAT_PC99
        default y
        help
            IOMMU support for VT-d enabled chipset

choice
    prompt "IRQ Controller"
    depends on PLAT_PC99
    default IRQ_PIC if ARCH_IA32
    default IRQ_IOAPIC if ARCH_X86_64
    help
        Select the IRQ controller seL4 will use. Code for others may
        still be included if needed to disable at run time
    config IRQ_PIC
        bool "PIC"
        help
            Use the legacy PIC controller
    config IRQ_IOAPIC
        bool "IOAPIC"
        help
            Use one or more IOAPIC controllers
endchoice

config MAX_NUM_IOAPIC
    prompt "Max supported IOAPICs"
    depends on PLAT_PC99
    int
    default 1
    help
        Configure the maximum number of IOAPIC controllers that can
        be supported. SeL4 will detect IOAPICs regardless of whether
        the IOAPIC will actually be used as the final IRQ controller

config PAE_PAGING
    bool "Use PAE Paging"
    depends on ARCH_IA32
    default n
    help
        PAE paging uses 4K/2M pages and has three levels of paging. If this
        is not used the old 32-bit paging with 4K/4M pages will be used

config HUGE_PAGE
    bool "Use 1GB Huge Page"
    depends on ARCH_X86_64
    default y
    help
        Add support for 1GB huge page. Not all recent processor models support
        this feature.

config INVPCID
    bool "Use INVPCID instruction"
    depends on ARCH_X86_64
    default y
    help
        The INVPCID instruction invalidate TLBs and paging-structure caches
        based on process-context identifier (PCID).

choice
    prompt "Setting FS/GS Base Addresses"
    depends on ARCH_X86
    default FSGSBASE_INST if ARCH_X86_64
    default FSGSBASE_GDT  if ARCH_IA32
    help
        There are three ways to to set FS/GS base addresses:
        IA32_FS/GS_GDT, IA32_FS/GS_BASE_MSR, and fsgsbase instructions.
        IA32_FS/GS_GDT and IA32_FS/GS_BASE_MSR are availble for 32-bit.
        IA32_FS/GS_BASE_MSR and fsgsbase instructions are available for 64-bit.

    config FSGSBASE_GDT
        bool "IA32_FS/GS_GDT"
        depends on ARCH_IA32
        help
            Use GDT entries.

    config FSGSBASE_MSR
        bool "IA32_FS/GS_BASE MSRs"
        depends on ARCH_X86
        help
            Use MSRs to change base addresses.

    config FSGSBASE_INST
        bool "FSGSBASE Instructions"
        depends on ARCH_X86_64
        help
            Use rdfs/gsbase, wrfs/gsbase instructions to change base adddresses.
endchoice
